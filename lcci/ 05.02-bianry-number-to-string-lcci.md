##  05.02. 二进制数转字符串

- 难度：Medium
- 题目链接：[https://leetcode-cn.com/problems/bianry-number-to-string-lcci/](https://leetcode-cn.com/problems/bianry-number-to-string-lcci/)


## 题目描述

来源于 [https://leetcode-cn.com/](https://leetcode-cn.com/)

<p>二进制数转字符串。给定一个介于0和1之间的实数（如0.72），类型为double，打印它的二进制表达式。如果该数字不在0和1之间，<strong>或者</strong>无法精确地用32位以内的二进制表示，则打印&ldquo;ERROR&rdquo;。</p>

<p><strong>示例1:</strong></p>

<pre><strong> 输入</strong>：0.625
<strong> 输出</strong>：&quot;0.101&quot;
</pre>

<p><strong>示例2:</strong></p>

<pre><strong> 输入</strong>：0.1
<strong> 输出</strong>：&quot;ERROR&quot;
<strong> 提示</strong>：0.1无法被二进制准确表示
</pre>

<p><strong>提示：</strong></p>

<ol>
	<li>32位包括输出中的&quot;0.&quot;这两位。</li>
</ol>


## 解法：

二进制的 `0.101` 表示的是 `0.625`，浮点中的个位代表的是 `2^-i`，比如 `0.625` 是按如下方式构成的：

```
0.625 = 0.5 + 0.25 + 0.125
```

要确定小数点后各位是 1 还是 0，可以浮点数乘以 2，如果它大于 1，说明这一位上为 1 否则 为 0。然后消除整数部分，再次乘以 2，来确定下一位。


```c++
class Solution {
public:
    string printBin(double num) {
        if(num >= 1 || num < 0){
            return "ERROR";
        }
        string ret = "0.";
        int i=0;
        while(++i <= 32 && num > 0){
            double n = num * 2;
            if(n >= 1){
                ret += '1';
                num = n - 1;
            }else{
                ret += '0';
                num = n;
            }
        }
        if(i > 32) return "ERROR";
        return ret;
    }
};
```